
# Electric Vehicles charging

Electric vehicle (EV) charging is one of the most immediate applications of Energy Management Systems (EMS), because of their high volume of demand and the possibility of combining an IT infrastructure within gthe charging points. 

The objective of this IT infrastructure is to limit the charging rate of the EV (or to halt it) on demand. This leads to a two different kind of optimization:

- **Timeframe**: The objective is to charge a certain amount of energy before a deadline, and allocate this energy consumption whenever is the best. The constrains are given by deadlines and the fitting formula, and then `foreshift()` is used to fulfill the needs of all the EVs involved.

- **Power**: Given a certain amount of power that can be dedicated to EV charge, the objective is to priorize the charge of some vehicles over others. The constrains are the grid capacity and the parameters and `distribute()` is used to establish which EVs are charged first. 

## Timeframe approach

The user case to address is when an EV owner requires a certain amount of energy in his or her battery before a certain deadline; for instance: "I need to have my car charged by tomorrow morning. When exactly is charged over the night, I do not care". 

For the `eflows` framework this is an example of foreshifting where the demand is *punctual* in time, namely, when the EV is connected to the chargig point. 

This is easy to see in a "business as usual" scenario, where regardless of the actual needs of the EV user, the behavior of the EV and the charging point is to consume the energy necessary to fill the EV battery as fast as possible. 

*As fast as possible* means that the charging power is technically limited by either the EV, the charging point or the grid capacity; in any case, the EV demand is not instant. Instead, what is obseved is a high power consumption that is sustained until the battery is filled. 


![Business as usual](../../www/images/ev/case-usual.png)

Controlling this power consumption is useful because more often than not an EV finishes to charge earlier than when it is necessary. Following with the previous user case: if the EV owner needs the battery full by 7:00 AM and in the "business as usual" scenario it is already filled by midnight, this means that there are seven hours of flexibility that were not seized. 

This flexibility could be used to charge the EV instead when energy is cheaper, or to make better use of wind energy production in nightime. 

In addition to the previous user case, they can be considered those cases that involve *several deadines*; for instance an EV owner that needs some extra energy in the battery in case of emergency, but doesn't care when the rest of the energy is consumed. 

![Business as usual](../../www/images/ev/cases-charging.png)


